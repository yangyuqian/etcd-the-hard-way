# Use goreman to run `go get github.com/mattn/goreman`
etcd1: etcd --name infra1 --data-dir ./infra1.etcd --listen-client-urls https://127.0.0.1:12379 --advertise-client-urls https://127.0.0.1:12379 --listen-peer-urls https://127.0.0.1:12380 --initial-advertise-peer-urls https://127.0.0.1:12380 --initial-cluster-token etcd-cluster-1 --initial-cluster 'infra1=https://127.0.0.1:12380,infra2=https://127.0.0.1:22380,infra3=https://127.0.0.1:32380' --initial-cluster-state new --enable-pprof --client-cert-auth --trusted-ca-file=${PWD}/ca.pem --cert-file=${PWD}/server.pem --key-file=server-key.pem --peer-client-cert-auth --peer-cert-file=${PWD}/infra1.pem --peer-key-file=${PWD}/infra1-key.pem --peer-trusted-ca-file=${PWD}/ca.pem

etcd2: etcd --name infra2 --data-dir ./infra2.etcd --listen-client-urls https://127.0.0.1:22379 --advertise-client-urls https://127.0.0.1:22379 --listen-peer-urls https://127.0.0.1:22380 --initial-advertise-peer-urls https://127.0.0.1:22380 --initial-cluster-token etcd-cluster-1 --initial-cluster 'infra1=https://127.0.0.1:12380,infra2=https://127.0.0.1:22380,infra3=https://127.0.0.1:32380' --initial-cluster-state new --enable-pprof --client-cert-auth --trusted-ca-file=${PWD}/ca.pem --cert-file=${PWD}/server.pem --key-file=server-key.pem --peer-client-cert-auth --peer-cert-file=${PWD}/infra2.pem --peer-key-file=${PWD}/infra2-key.pem --peer-trusted-ca-file=${PWD}/ca.pem

etcd3: etcd --name infra3 --data-dir ./infra3.etcd --listen-client-urls https://127.0.0.1:32379 --advertise-client-urls https://127.0.0.1:32379 --listen-peer-urls https://127.0.0.1:32380 --initial-advertise-peer-urls https://127.0.0.1:32380 --initial-cluster-token etcd-cluster-1 --initial-cluster 'infra1=https://127.0.0.1:12380,infra2=https://127.0.0.1:22380,infra3=https://127.0.0.1:32380' --initial-cluster-state new --enable-pprof --client-cert-auth --trusted-ca-file=${PWD}/ca.pem --cert-file=${PWD}/server.pem --key-file=server-key.pem --peer-client-cert-auth --peer-cert-file=${PWD}/infra3.pem --peer-key-file=${PWD}/infra3-key.pem --peer-trusted-ca-file=${PWD}/ca.pem

# in future, use proxy to listen on 2379
# proxy: etcd --name infra-proxy1 --proxy=on --listen-client-urls http://127.0.0.1:2379 --initial-cluster 'infra1=http://127.0.0.1:12380,infra2=http://127.0.0.1:22380,infra3=http://127.0.0.1:32380' --enable-pprof
# gateway: etcd gateway start --endpoints=http://127.0.0.1:12379,http://127.0.0.1:22379,http://127.0.0.1:32379 --listen-addr=http://127.0.0.1:2379
